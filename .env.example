# Professional Algorithmic Trading System Configuration
# Copy this file to .env and edit values

# ===============================================
# DATABASE CONFIGURATION
# ===============================================
MONGODB_URI=mongodb://0.0.0.0:27017 # MongoDB connection URI
DATABASE_NAME=trading_system # Name of the database to use
MONGODB_TIMEOUT=5 # Timeout for MongoDB operations in seconds

# ===============================================
# TRADING CONFIGURATION - OPTIMIZED RECOMMENDED SETTINGS
# ===============================================
# Initial balance: Set between $15,000-20,000 (₹12.5L-16.7L) for optimal trading
# Higher balance = better risk management, lower chance of liquidation
INITIAL_BALANCE=17500.0 # Recommended optimal balance for professional trading

# Position sizing: 15% per trade strikes perfect balance between growth and safety
# Too low = slow growth, Too high = high risk. 15% is the sweet spot.
BALANCE_PER_TRADE_PCT=0.15 # Normal mode: 15% of balance per trade (OPTIMIZED from 20%)

# Safe mode automatically activates for small balances (≤₹1000)
SAFE_BALANCE_PER_TRADE_PCT=0.05 # Safe mode: 5% of balance per trade (for small accounts)

# Stop loss and targets: Optimized for crypto futures volatility
STOP_LOSS_PCT=0.05 # 5% stop loss - protects against major losses
TARGET_PCT=0.10 # 10% target - realistic profit expectations
DAILY_TRADES_LIMIT=50 # Maximum trades per day - prevents overtrading
MIN_CONFIDENCE=50.0 # Minimum strategy confidence to execute trade

# ===============================================
# MARGIN AND LEVERAGE SETTINGS - OPTIMIZED
# ===============================================
# 30x leverage: Perfect balance between profit potential and risk control
# Lower than 50x reduces liquidation risk while maintaining good profit margins
DEFAULT_LEVERAGE=30.0 # OPTIMIZED: 30x leverage (reduced from 50x for better risk management)

MAX_LEVERAGE=50.0 # Maximum allowed leverage (keeps flexibility)
LIQUIDATION_BUFFER_PCT=0.30 # 30% buffer from liquidation - prevents surprise liquidations

# Maximum 2 positions: Prevents overexposure, allows better focus and management
MAX_POSITIONS_OPEN=2 # OPTIMIZED: Max 2 positions (reduced from 3 for better control)

# ===============================================  
# EMERGENCY CLOSE RISK THRESHOLDS - LAST RESORT PROTECTION
# ===============================================
# Emergency close triggers when situation becomes critical - these are safety nets
EMERGENCY_CLOSE_MARGIN_PCT=95.0 # Close position when margin usage hits 95% (near liquidation)
EMERGENCY_CLOSE_LOSS_PCT=15.0 # Close position when loss exceeds 15% (major loss protection)
EMERGENCY_CLOSE_TIME_HOURS=48.0 # Close position after 48 hours (prevents stale positions)

# ===============================================
# RISK LEVEL THRESHOLDS - GRADUATED RISK MANAGEMENT
# ===============================================
# These thresholds create 4 risk levels: LOW → MEDIUM → HIGH → CRITICAL
# System takes appropriate action at each level to prevent losses

# CRITICAL Risk Level - Immediate action required
CRITICAL_RISK_MARGIN_PCT=90.0 # Critical when margin usage > 90% (liquidation danger)
CRITICAL_RISK_LOSS_PCT=12.0 # Critical when loss > 12% (major loss territory)
CRITICAL_RISK_TIME_HOURS=36.0 # Critical after 36 hours (position getting stale)

# HIGH Risk Level - Tighten controls
HIGH_RISK_MARGIN_PCT=80.0 # High risk when margin usage > 80% (getting dangerous)
HIGH_RISK_LOSS_PCT=8.0 # High risk when loss > 8% (significant loss)
HIGH_RISK_TIME_HOURS=24.0 # High risk after 24 hours (should consider exit)

# MEDIUM Risk Level - Increased monitoring
MEDIUM_RISK_MARGIN_PCT=70.0 # Medium risk when margin usage > 70% (monitor closely)
MEDIUM_RISK_LOSS_PCT=5.0 # Medium risk when loss > 5% (normal stop loss range)
MEDIUM_RISK_TIME_HOURS=12.0 # Medium risk after 12 hours (normal holding time)

# ===============================================
# PORTFOLIO RISK MANAGEMENT - ANTI-OVERTRADE PROTECTION
# ===============================================
# Portfolio risk controls prevent taking too much overall risk across all positions

# High risk threshold: When total portfolio margin usage exceeds this, risk alerts trigger
HIGH_RISK_MARGIN_PCT=85.0 # OPTIMIZED: Portfolio high risk at 85% total margin usage

# Maximum portfolio risk: When this is exceeded, NO NEW TRADES are allowed (anti-overtrade)
# This prevents the system from opening new positions when portfolio is already at high risk
MAX_PORTFOLIO_RISK_PCT=80.0 # CRITICAL: No new trades when portfolio risk > 80%

# ===============================================
# TRADING FEE SETTINGS
# ===============================================
# Trading fees are calculated as percentage of margin used (not position value)
TRADING_FEE_PCT=0.001 # 0.1% fee on margin used (realistic for crypto futures)
EXIT_FEE_MULTIPLIER=0.5 # Exit fee is 50% of entry fee (total cost = 1.5x entry fee)

# ===============================================
# SYSTEM INTERVALS (in seconds)
# ===============================================
STRATEGY_EXECUTION_INTERVAL=600 # Interval for executing trading strategies
HISTORICAL_DATA_UPDATE_INTERVAL=900 # Interval for updating historical data
RISK_CHECK_INTERVAL=60 # Interval for checking risk management conditions
LIVE_PRICE_UPDATE=realtime # Method for live price updates, can be 'realtime' or 'polling'

# ===============================================
# WEBSOCKET SETTINGS
# ===============================================
WEBSOCKET_PORT=8765 # Port for the WebSocket server
WEBSOCKET_TIMEOUT=30 # Timeout for WebSocket connections in seconds

# ===============================================
# NOTIFICATIONS (FastAPI-Mail)
# ===============================================
EMAIL_NOTIFICATIONS_ENABLED=true # Enable or disable email notifications
# FastAPI-Mail configuration for sending emails
FASTAPI_MAIL_USERNAME=test@gamil.com # Email username for FastAPI-Mail
FASTAPI_MAIL_PASSWORD=jaybhaieknumber # Email password for FastAPI-Mail
FASTAPI_MAIL_FROM=test@gamil.com # Email address from which notifications are sent 
FASTAPI_MAIL_FROM_NAME=Trade Buddy By Jay Patel # Name to display in email notifications
FASTAPI_MAIL_PORT=587 # SMTP port for sending emails
FASTAPI_MAIL_SERVER=smtp.gmail.com # SMTP server for sending emails
FASTAPI_MAIL_STARTTLS=true # Use STARTTLS for secure email transmission
FASTAPI_MAIL_SSL_TLS=false  # Use SSL/TLS for secure email transmission

# ===============================================
# ACTIVE STRATEGIES
# ===============================================
STRATEGY_CLASSES=["EMAStrategy"] # List of active trading strategies to be used in the system
TRADING_SYMBOLS=["BTCUSD", "ETHUSD"] # List of trading symbols to be monitored and traded

# ===============================================
# LOGGING
# ===============================================
LOG_LEVEL=INFO